# n7tya-lang（なちゃ言語）言語思想

> **「人間の思考を妨げない自由（Python/TS）」と「コンピュータに妥協しない厳格さ（Rust）」の完全な調和**

---

## メインターゲット：フルスタックWebアプリ

**キャッチコピー：「フルスタックWebアプリを1言語で」**

### n7tya-langの強み

| 機能 | 活用例 |
|------|--------|
| Python連携 | データ処理、ML、AI |
| GCなし | リアルタイム処理、低レイテンシ |
| JSX統合 | UI、ダッシュボード |
| Wasmファースト | ブラウザ、エッジ |

### 競合言語にはできない

- **Python**: フロントエンドが弱い
- **TypeScript**: パフォーマンスに限界
- **Rust**: 学習コストが高い
- **Go**: フロントエンド統合なし

---

## コア思想（13の柱）

### 1. 統括思想：エンジニアを「選ばせない」

これまでの言語は、常にエンジニアに苦渋の選択を強いてきました。

- 「速い言語を使いたいなら、難しい文法（Rust/C++）を我慢しろ」
- 「楽に書きたいなら、実行速度とメモリ（Python/JS）を諦めろ」

**n7tya-langの思想は「両方取る」ことです。**

「書きやすさ」と「速度・安全性」は対立するものではなく、**コンパイラの知能（推論能力）を高めることで統合できる**と考えます。

---

### 2. 構文思想：思考のショートカット

コードは「書く時間」より「読む時間」の方が長い。だからこそ、**ノイズを極限まで削ぎ落とします**。

#### 「意味のない記号」の追放
`;` `{}` `()` などの、コンピュータのためだけの記号を排除し、**インデントという「視覚的な構造」をそのまま「論理的な構造」**にします。

#### JSXのネイティブ統合
UIを「文字列」や「外部ファイル」ではなく、言語の**「一級市民」**として扱います。これにより、フロントエンド開発を「ただの関数の組み合わせ」に変えます。

---

### 3. 型思想：透明な防弾チョッキ

TypeScriptの「柔軟性」とRustの「堅牢性」を融合させます。

#### 漸進的かつ絶対的
書いている最中は型を意識させない（Anyのように振る舞う）。しかし、**コンパイルした瞬間に、コンパイラが裏側で「Rustレベルの厳格な型」に固定**します。

#### 構造的部分型
「同じ振る舞いをするなら、同じ型である」という直感を重視します。型定義に縛られるのではなく、**コードの形から型を導き出します**。

---

### 4. 実行思想：ハードウェアへの敬意

現代のCPUとメモリの性能を100%引き出すための設計です。

#### GC（ガベージコレクション）の完全排除
実行中に「掃除」の時間を作らない。Rustの「所有権」概念を、**開発者が意識せずともコンパイラが自動で適用**し、コンパイル時にメモリの寿命を確定させます。

#### Wasmファースト
ブラウザを「JavaScriptが動く場所」ではなく「**高性能なバイナリが動くOS**」として扱います。

---

### 5. エコシステム思想：過去を否定せず、未来を創る

「新しい言語だからライブラリがない」という問題を、最初から解決しておきます。

#### Pythonとの共生
20年かけて蓄積されたPythonのAI・データサイエンス資産を、**`import` 一行で「高速かつ型安全」に呼び出せるブリッジ**を標準搭載します。

---

### 6. パッケージ管理思想：依存地獄からの解放

Pythonの`pip freeze`地獄、`node_modules`の肥大化を許さない。

#### uv/Cargo式のロックファイル
- **n7tya.toml** - 人間が書く依存関係定義
- **n7tya.lock** - 機械が管理する完全なバージョン固定
- 再現可能なビルドを保証

#### SemVerによる自動整合性チェック
ライブラリのバージョン衝突を**インストール時に検出**。実行時に壊れる心配がない。

#### 統一された設定ファイル
`n7tya.toml` 一つで、ビルド、依存関係、フロントエンド配信、Python連携のすべてを記述。

---

### 7. 開発体験（DX）思想：すぐ始められる

開発者の時間を奪わない。

#### ゼロコンフィグ
`n7tya new myapp` で即座にプロジェクト開始。設定ファイルを書く前にコードが動く。

#### ホットリロード
ファイル保存と同時にブラウザが更新。コンパイル待ち時間ゼロ。

#### LSP標準搭載
VSCode拡張を最初から提供。補完、エラー表示、定義ジャンプが最初から動く。

---

### 8. エラー思想：敵ではなく味方

エラーは「怒られる」ものではなく「教えてもらう」もの。

#### miette式エラー表示
- エラーの**原因**と**解決策**を同時に提示
- コードの該当箇所をハイライト
- 「どう直せばいいか」まで提案

#### コンパイル時に全て検出
実行時エラーを最小化。型エラー、null参照、ライブラリ不整合はすべてコンパイル時に発見。

---

### 9. AI-Human協調思想：Vibe-codingの時代へ

2026年、コードは人間だけが書くものではなくなった。AIと人間が共同でコードを書く「Vibe-coding」の時代に最適化された言語設計。

#### AIが書きやすい・修正しやすい
- **明確な構造**: インデントベースで曖昧さがない
- **一貫した規則**: 例外的な文法がなく、パターンマッチが容易
- **セルフドキュメンティング**: 型情報がコード内で完結

#### 人間が読みやすい・修正しやすい
- **ノイズレス**: 記号の洪水がなく、意図が明確
- **視覚的構造**: インデントがそのまま論理構造
- **差分が明確**: AIが生成したコードの変更点が一目瞭然

#### AI-Human協調のための設計
- LLMがトークン効率よく処理できるシンプルな構文
- AIが生成したコードを人間がレビューしやすい可読性
- 人間の指示からAIがコードを生成しやすい明確な言語仕様

---

### 10. 並行処理思想：非同期をネイティブに

AI-Agent Webアプリでは、複数のリクエストを同時に処理する能力が必須。

#### async/awaitのネイティブサポート
- 非同期処理を言語の中核機能として設計
- コールバック地獄を根絶

#### ストリーミング対応
- LLMのストリーミング応答をネイティブでハンドリング
- `stream for chunk in llm.generate(prompt)` のような直感的な構文

#### 軽量タスク
- GoのgoroutineやRustのtokioのような軽量な並行処理
- 数千の同時接続を効率的に処理

---

### 11. セキュリティ思想：デフォルトで安全

Deno式の「明示的許可」モデルを採用。

#### パーミッションシステム
- ネットワークアクセス、ファイルシステム、環境変数は明示的に許可
- `n7tya run --allow-net --allow-read main.n7`

#### サンドボックス実行
- 信頼できないコードを安全に実行
- 依存ライブラリの権限を制限

#### 依存関係の監査
- `n7tya audit` で脆弱性チェック
- 悪意のあるパッケージを検出

---

### 12. テスト思想：テストは当たり前

テストを書くことに抵抗をなくす。

#### 言語組み込みテスト
- 外部フレームワーク不要
- `test "ユーザー登録"` ブロックで即テスト定義

```python
test "足し算が正しく動作する"
    assert add(1, 2) == 3

test "APIがレスポンスを返す"
    response = await fetch "/api/health"
    assert response.status == 200
```

#### ゼロ設定実行
- `n7tya test` で全テスト実行
- 設定ファイル不要、ディレクトリ構造の規約もなし

---

### 13. デプロイ思想：どこでも動く

「動くものを届ける」までが言語の責任。

#### シングルバイナリ出力
- 依存関係をすべて含んだ単一ファイル
- Dockerなしでどこでも実行可能

#### マルチターゲット
- ネイティブバイナリ（Linux, macOS, Windows）
- WebAssembly（ブラウザ、エッジ）
- `n7tya build --target wasm`

#### クラウドネイティブ
- AWS Lambda、Cloudflare Workers対応
- コールドスタート時間を最小化

---

## n7tya-langが実現する世界

この言語が完成したとき、開発者は以下のような体験をすることになります：

> **「朝、Pythonのような気軽さでコードを書き始め、昼にTypeScriptのような感覚でUIを組み上げ、夕方にビルドボタンを押すと、Rust並みの爆速で動く安全なバイナリとWebサイトが同時に出来上がっている」**

---

## 参考言語

| 言語 | 取り入れる要素 |
|------|---------------|
| **Python** | シンプルな構文、インデントベース、AI/MLライブラリ資産 |
| **Rust** | 所有権、GCレス、コンパイル時安全性、パフォーマンス |
| **TypeScript** | 漸進的型付け、構造的部分型 |
| **JSX/React** | UIを一級市民として扱う、コンポーネント構文 |
| **Cargo/uv** | TOML設定、ロックファイル、依存関係管理 |
| **flux** | Rust製処理系、pyo3によるPython連携 |

---

## コード例：フルスタックWebアプリ（ビジョン）

```python
# n7tya-lang: フルスタックWebアプリ

import numpy as np

# データ処理クラス
class DataProcessor
	def __init__
		self.data = []
	
	def process items: List[Int] -> Float
		arr = np.array items
		return arr.mean

# サーバー
server app
	port = 8080
	processor = DataProcessor
	
	route "/" method: GET
		return html "<h1>Welcome</h1>"
	
	route "/api/calc" method: POST
		result = processor.process request.body.items
		return json result: result

# フロントエンド
component Calculator
	state items = []
	state result = 0
	
	def add_item value
		self.items.push value
	
	def calculate
		response = await fetch "/api/calc" body: items: self.items
		self.result = response.result
	
	render
		<div class="container">
			<h1>Calculator</h1>
			<button onclick={self.calculate}>Calculate</button>
			<p>Result: {self.result}</p>
		</div>
```

---

## n7tya.toml 例

```toml
[package]
name = "my-webapp"
version = "0.1.0"

[dependencies]
http = "^1.0"

[python]
packages = ["numpy"]

[server]
port = 8080

[frontend]
entry = "src/Calculator.n7t"
output = "dist/"
```

---

*最終更新: 2026-01-14*
*「プログラミングの歴史を塗り替える」*

